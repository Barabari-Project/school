import{s as x,A as ee,p as N,f as C,a as W,g as T,h as S,d as g,c as z,j as h,i as M,x as $,B as H,C as V,D as te,z as ne,o as oe,E as le,y as se,e as B,F as ie}from"../chunks/scheduler.35e2a1e6.js";import{S as ae,i as re,f as F,b as X,d as Y,m as G,a as v,t as y,c as K,e as Q,g as U}from"../chunks/index.c2a6e5b5.js";import{e as J}from"../chunks/each.e59479a4.js";import{T as ce,h as fe,C as ue,a as L,b as de,t as me}from"../chunks/toasts.45318c18.js";const pe=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,_e=s=>(localStorage.setItem("bbi-code",JSON.stringify({code:s,date:Date.now()/1e3})),s),he=()=>{const s=localStorage.getItem("bbi-code");if(s){const{code:e,date:a}=JSON.parse(s);let t=Date.now()/1e3-+a;if(t=t/3600,t<2)return console.log("Mounted with saved:",e),e;localStorage.removeItem("bbi-code")}return console.log("Mounted with default"),ce};const{window:O}=pe;function j(s,e,a){const t=s.slice();return t[17]=e[a],t}function q(s){let e,a='<button id="langle" class="svelte-1t18i54">&lt;</button> <button id="rangle" class="svelte-1t18i54">&gt;</button> <button id="lcurly" class="svelte-1t18i54">{</button> <button id="rcurly" class="svelte-1t18i54">}</button> <button id="copy" class="svelte-1t18i54">CopyAll</button> <button id="clear" class="svelte-1t18i54">Clear</button>',t,n;return{c(){e=C("div"),e.innerHTML=a,this.h()},l(u){e=T(u,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-13vffr9"&&(e.innerHTML=a),this.h()},h(){h(e,"class","p5 f buttons w-100 flow-x-s svelte-1t18i54")},m(u,i){M(u,e,i),t||(n=H(e,"click",s[6]),t=!0)},p:se,d(u){u&&g(e),t=!1,n()}}}function P(s){let e,a,t=J(s[4]),n=[];for(let i=0;i<t.length;i+=1)n[i]=R(j(s,t,i));const u=i=>y(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=B()},l(i){for(let r=0;r<n.length;r+=1)n[r].l(i);e=B()},m(i,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,r);M(i,e,r),a=!0},p(i,r){if(r&16){t=J(i[4]);let o;for(o=0;o<t.length;o+=1){const p=j(i,t,o);n[o]?(n[o].p(p,r),v(n[o],1)):(n[o]=R(p),n[o].c(),v(n[o],1),n[o].m(e.parentNode,e))}for(U(),o=t.length;o<n.length;o+=1)u(o);K()}},i(i){if(!a){for(let r=0;r<t.length;r+=1)v(n[r]);a=!0}},o(i){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)y(n[r]);a=!1},d(i){i&&g(e),ie(n,i)}}}function R(s){let e,a;return e=new de({props:{message:s[17].message,type:s[17].type}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){G(e,t,n),a=!0},p(t,n){const u={};n&16&&(u.message=t[17].message),n&16&&(u.type=t[17].type),e.$set(u)},i(t){a||(v(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){Q(e,t)}}}function ge(s){let e,a,t,n,u,i,r,o,p,m,w,b,E;ee(s[8]);function A(c){s[9](c)}function D(c){s[10](c)}let k={lang:fe(),styles:{"&":{fontSize:"18px",height:"100%",width:"100%"}},lineWrapping:!0};s[0]!==void 0&&(k.value=s[0]),s[2]!==void 0&&(k.view=s[2]),t=new ue({props:k}),N.push(()=>F(t,"value",A)),N.push(()=>F(t,"view",D)),t.$on("change",s[5]);let d=s[3]<=768&&q(s),f=s[4].length&&P(s);return{c(){e=C("main"),a=C("div"),X(t.$$.fragment),i=W(),d&&d.c(),r=W(),o=C("iframe"),p=W(),m=C("div"),f&&f.c(),this.h()},l(c){e=T(c,"MAIN",{class:!0});var l=S(e);a=T(l,"DIV",{class:!0});var _=S(a);Y(t.$$.fragment,_),_.forEach(g),i=z(l),d&&d.l(l),r=z(l),o=T(l,"IFRAME",{id:!0,frameborder:!0,title:!0,class:!0}),S(o).forEach(g),l.forEach(g),p=z(c),m=T(c,"DIV",{id:!0,class:!0});var I=S(m);f&&f.l(I),I.forEach(g),this.h()},h(){h(a,"class","editor p-rel svelte-1t18i54"),h(o,"id","mfWHAT"),h(o,"frameborder","0"),h(o,"title","Editor Output"),h(o,"class","svelte-1t18i54"),h(e,"class","f fw svelte-1t18i54"),h(m,"id","toaster"),h(m,"class","p-fix w-100 tc f-col svelte-1t18i54")},m(c,l){M(c,e,l),$(e,a),G(t,a,null),$(e,i),d&&d.m(e,null),$(e,r),$(e,o),s[11](o),M(c,p,l),M(c,m,l),f&&f.m(m,null),w=!0,b||(E=[H(O,"click",s[7]),H(O,"resize",s[8])],b=!0)},p(c,[l]){const _={};!n&&l&1&&(n=!0,_.value=c[0],V(()=>n=!1)),!u&&l&4&&(u=!0,_.view=c[2],V(()=>u=!1)),t.$set(_),c[3]<=768?d?d.p(c,l):(d=q(c),d.c(),d.m(e,r)):d&&(d.d(1),d=null),c[4].length?f?(f.p(c,l),l&16&&v(f,1)):(f=P(c),f.c(),v(f,1),f.m(m,null)):f&&(U(),y(f,1,1,()=>{f=null}),K())},i(c){w||(v(t.$$.fragment,c),v(f),w=!0)},o(c){y(t.$$.fragment,c),y(f),w=!1},d(c){c&&(g(e),g(p),g(m)),Q(t),d&&d.d(),s[11](null),f&&f.d(),b=!1,te(E)}}}function be(s,e,a){let t;ne(s,me,l=>a(4,t=l));let n="",u,i,r,o=0,p;const m=l=>{u.open(),u.write(l),u.close()},w=()=>{m(n),_e(n)},b=l=>{r.dispatch({changes:{from:o,insert:l},selection:{anchor:o+1,head:o+1}}),o+=l.length,r.focus(),w()},E={rangle:()=>b(">"),langle:()=>b("<"),rcurly:()=>b("}"),lcurly:()=>b("{"),copy:()=>{navigator.clipboard.writeText(n),L.add("Copied!")},clear:()=>{a(0,n=""),L.add("Cleared!")}},A=({target:l})=>{const _=l.id;if(!_)return 0;E[_]()};oe(()=>{a(0,n=he()),u||(u=i.contentWindow.document),m(n),L.add("Compiler Loaded!"),window.editor=r});const D=l=>{if(!l.target.classList.contains("cm-line"))return 0;let[I,Z]=[l.clientX,l.clientY];o=r.posAtCoords({x:I,y:Z})};function k(){a(3,p=O.innerWidth)}function d(l){n=l,a(0,n)}function f(l){r=l,a(2,r)}function c(l){N[l?"unshift":"push"](()=>{i=l,a(1,i)})}return[n,i,r,p,t,w,A,D,k,d,f,c]}class Ce extends ae{constructor(e){super(),re(this,e,be,ge,x,{})}}export{Ce as component};
